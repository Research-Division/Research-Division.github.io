<!-- Tariff Comparison Chart Modal -->
<div id="tariff-comparison-modal" class="multi-chart-panel-content" style="overflow-y: auto; max-height: 95vh;">
    <div class="multi-chart-panel-header">
        <div class="multi-chart-title-container">
            <h2 id="tariff-comparison-title">Imposed Tariffs & Effects: 
                <span class="country-name"></span> (<span class="country-iso">CHN</span>)
                <span class="country-dropdown-toggle">
                    <img src="assets/fontawesome/chevron-down-solid.svg" alt="Select Country" class="dropdown-icon">
                </span>
            </h2>
            <div class="country-dropdown" id="country-dropdown">
                <div id="country-dropdown-content">
                    <!-- Country options will be populated here -->
                </div>
            </div>
        </div>
        <button class="panel-close-button">
            <img src="assets/fontawesome/xmark.svg" alt="Close" class="close-icon">
        </button>
    </div>

    <!-- Implemented Tariff Changes-->
    <div class="multi-chart-panel-body">
        <div class="split-section">
            <div class="split-left">
                <h3 class="section-header">Implemented vs. Original Tariffs by Section</h3>
                <div class="text-section">
                    <p>
                        This chart shows a comparison between the original tariff rates and the current 
                        imposed tariff rates by HS section. Missing bars indicate no tariff or no import
                        data for that section.
                    </p>
                    <p>
                        <strong>Key observation:</strong> Sections with the largest tariff increases are 
                        likely to experience the most significant trade effects. The impact depends on both 
                        the magnitude of the tariff change and the importance of that section in bilateral trade.
                    </p>
                </div>
            </div>
            <div class="split-right">
                <div id="tariff-comparison-chart-container" class="chart-container"></div>
            </div>
        </div>
    </div>

    <!-- Tariff Effects -->
    <div class="multi-chart-panel-body">
        <div class="split-section">
            <div class="split-left">
                <h3 class="section-header">Tariff Effects Breakdown</h3>
                <div class="text-section">
                    <p>
                        This treemap visualization shows the breakdown of tariff effects across economic sectors.
                        Each box represents a sector of the economy, with larger boxes indicating greater effects.
                    </p>
                    <p>
                        <strong>Key features:</strong>
                        <ul>
                            <li>Click on a sector to drill down and explore more detailed breakdowns</li>
                            <li>Use the tabs above the chart to switch between direct, indirect and total effects</li>
                            <li>Use the reset button to return to the top-level view</li>
                        </ul>
                    </p>
                    <p>
                        <strong>Direct effects</strong> represent the immediate price changes from tariffs, while
                        <strong>indirect effects</strong> show the downstream impacts as these changes propagate
                        through the economy. <strong>Total effects</strong> combine both types.
                    </p>
                    <p>
                        Values shown in each box include:
                        <ul>
                            <li>The percentage indicates the share of the total effect in that category</li>
                            <li>The dollar amount shows the estimated additional cost for a household with annual income of 
                                <span class="household-income-display">$100,000</span><span class="household-income-dropdown-toggle"><img src="assets/fontawesome/chevron-down-solid.svg" alt="Select Income" class="dropdown-icon"></span>
                            </li>
                        </ul>
                        <div class="household-income-dropdown" id="household-income-dropdown">
                            <div id="household-income-dropdown-content">
                                <!-- Income options will be populated here -->
                            </div>
                        </div>
                    </p>
                </div>
            </div>
            <div class="split-right">
                <div id="tariff-effect-chart-container" class="chart-container"></div>
            </div>
        </div>
    </div>
</div>

<!-- OLD VERSSION
<div id = 'tariff-comparison-chart-modal' class = 'modal-chart-panel-content' style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5);">
    <div class="modal-content" style="position: relative; background-color: var(--background-color); margin: auto; padding: 20px; border: 1px solid var(--borderColor); box-shadow: 0 4px 8px rgba(0,0,0,0.2); max-width: 900px; width: 90%;">
        <div class="modal-header">
            <span class="close" onclick="tariffComparisonChart.close()" style="position: absolute; top: 10px; right: 15px; color: var(--textColor); font-size: 28px; font-weight: bold; cursor: pointer;">&times;</span>
            <h2 id="tariff-comparison-title" style="margin-top: 10px; color: var(--textColor);">Tariff Comparison</h2>
        </div>
        <div class="modal-body" style="padding: 20px 0;">
            <div id="tariff-comparison-chart-container" class="chart-container tariff-bar-chart-container" style="width: 100%; max-width: 800px; margin: 0 auto; padding-bottom: 60px;">
                <div class="chart-loading" style="display: flex; justify-content: center; align-items: center; height: 300px; font-style: italic; color: var(--textColor);">Loading tariff comparison data...</div>
            </div>
        </div>
    </div>
</div>
-->
